## ê°œìš”

ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œëŠ” `AUTO_INCREMENT` ë°©ì‹ë§Œìœ¼ë¡œëŠ” **ì „ì—­ ìœ ì¼í•œ ID ìƒì„±**ì´ ì–´ë µìŠµë‹ˆë‹¤.

ì´ ë¬¸ì„œì—ì„œëŠ” ëŒ€í‘œì ì¸ ID ìƒì„± ì „ëµ 4ê°€ì§€ë¥¼ ë¹„êµí•˜ê³ , **Twitter Snowflake ë°©ì‹**ì„ ì¤‘ì‹¬ìœ¼ë¡œ

**64ë¹„íŠ¸ ìˆ«ìí˜• IDë¥¼ ì•ˆì •ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” êµ¬ì¡°ì™€ ìš´ì˜ ì „ëµ**ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

---

**ì½ê³  ë‚˜ë©´ ì•Œ ìˆ˜ ìˆëŠ” ê²ƒ**

- ê¸°ì¡´ ë°©ì‹ì˜ í•œê³„ì™€ ë¶„ì‚° í™˜ê²½ì—ì„œì˜ ê³¼ì œ
- ëŒ€í‘œì ì¸ ID ìƒì„± ë°©ì‹ 4ê°€ì§€ì˜ ì¥ë‹¨ì 
- Snowflake ë°©ì‹ì˜ ID êµ¬ì¡°, ë™ì‘ ì›ë¦¬, ìš´ì˜ ì‹œ ê³ ë ¤ì‚¬í•­

---

## 1. ë¬¸ì œ ì •ì˜

### 1.1 ê¸°ì¡´ ë°©ì‹ì˜ í•œê³„: `AUTO_INCREMENT`

`AUTO_INCREMENT` ë°©ì‹ì€ ë‹¨ì¼ DBì—ì„œ ìˆœì°¨ì ìœ¼ë¡œ IDë¥¼ ìƒì„±í•˜ëŠ” êµ¬ì¡°ë¡œ,

ë‹¤ìŒê³¼ ê°™ì€ ì´ìœ ë¡œ ë¶„ì‚° ì‹œìŠ¤í…œì— ì í•©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

| ë¬¸ì œ | ì„¤ëª… |
| --- | --- |
| **ë‹¨ì¼ ì„œë²„ ì˜ì¡´** | ID ìƒì„±ì´ íŠ¹ì • DBì— ì§‘ì¤‘ë˜ì–´ ë³‘ëª©ê³¼ ë‹¨ì¼ ì¥ì•  ì§€ì (SPOF)ì´ ë°œìƒí•©ë‹ˆë‹¤. |
| **ìˆ˜í‰ í™•ì¥ ë¶ˆê°€** | ì¤‘ë³µ ë°©ì§€ë¥¼ ìœ„í•´ DBë¥¼ ìˆ˜í‰ í™•ì¥í•˜ê¸° ì–´ë µê³ , ì´ëŠ” í™•ì¥ì„±ê³¼ íƒ„ë ¥ì„±ì„ ì œí•œí•©ë‹ˆë‹¤. |
| **ë™ê¸°í™” ë¹„ìš© ì¦ê°€** | ì—¬ëŸ¬ DBì—ì„œ ì¤‘ë³µ ì—†ëŠ” IDë¥¼ ìƒì„±í•˜ë ¤ë©´ ìƒíƒœ ê³µìœ  ë° ì¡°ìœ¨ì´ í•„ìš”í•´ ì§€ì—°ì´ ì»¤ì§‘ë‹ˆë‹¤. |

---

## 1.2 ìš”êµ¬ì‚¬í•­ ë„ì¶œ ê³¼ì •

ì‹œìŠ¤í…œ ì„¤ê³„ ë¬¸ì œë¥¼ í•´ê²°í•  ë•ŒëŠ” ë¨¼ì € **ìš”êµ¬ì‚¬í•­ì„ ëª…í™•íˆ íŒŒì•…**í•˜ê³ ,

ëª¨í˜¸í•œ ë¶€ë¶„ì€ **ì§ˆë¬¸ì„ í†µí•´ í•´ì†Œ**í•´ì•¼ í•©ë‹ˆë‹¤.

ì•„ë˜ëŠ” ë©´ì ‘ ìƒí™©ì—ì„œ ì˜¤ê°ˆ ìˆ˜ ìˆëŠ” ì§ˆì˜ ì˜ˆì‹œì…ë‹ˆë‹¤.

### ë©´ì ‘ ì§ˆë¬¸ ì˜ˆì‹œ

- **IDëŠ” ì–´ë–¤ íŠ¹ì„±ì„ ê°€ì ¸ì•¼ í•˜ë‚˜ìš”?**
    
    â†’ ìœ ì¼í•´ì•¼ í•˜ê³ , ì •ë ¬ ê°€ëŠ¥í•´ì•¼ í•œë‹¤.
    
- **IDëŠ” í•­ìƒ 1ì”© ì¦ê°€í•˜ë‚˜ìš”?**
    
    â†’ ê¼­ 1ì”© ì¦ê°€í•  í•„ìš”ëŠ” ì—†ì§€ë§Œ, ì‹œê°„ì´ íë¥¼ìˆ˜ë¡ ê°’ì´ ì»¤ì ¸ì•¼ í•œë‹¤.
    
- **IDëŠ” ìˆ«ìë¡œë§Œ êµ¬ì„±ë˜ë‚˜ìš”?**
    
    â†’ ê·¸ë ‡ë‹¤.
    
- **ì´ˆë‹¹ ìƒì„±ëŸ‰ì€ ì–´ëŠ ì •ë„ì¸ê°€ìš”?**
    
    â†’ ì´ˆë‹¹ 10,000ê°œ ID ìƒì„±ì´ ê°€ëŠ¥í•´ì•¼ í•œë‹¤.
    

---

## 1.3 ìµœì¢… ìš”êµ¬ì‚¬í•­ ì •ë¦¬

ìœ„ ì§ˆë¬¸ì„ ë°”íƒ•ìœ¼ë¡œ, ì‹œìŠ¤í…œì´ ë§Œì¡±í•´ì•¼ í•  ID ìƒì„± ìš”ê±´ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

- **IDëŠ” ì „ì—­ì ìœ¼ë¡œ ìœ ì¼í•´ì•¼ í•œë‹¤.**
- **ìˆ«ì í˜•íƒœë¡œ êµ¬ì„±ë˜ì–´ì•¼ í•œë‹¤.**
- **64ë¹„íŠ¸ ì •ìˆ˜ ë‚´ì—ì„œ í‘œí˜„ ê°€ëŠ¥í•´ì•¼ í•œë‹¤.**
    
    â†’ ìœ ì¼ì„±, ì •ë ¬ì„±, ì„±ëŠ¥, ì‹œìŠ¤í…œ ê°„ í˜¸í™˜ì„±ì„ ì¢…í•©ì ìœ¼ë¡œ ì¶©ì¡±
    
- **ì‹œê°„ íë¦„ì— ë”°ë¼ ì •ë ¬ ê°€ëŠ¥í•´ì•¼ í•œë‹¤.**
- **ì´ˆë‹¹ ìµœì†Œ 10,000ê°œ ì´ìƒì˜ IDë¥¼ ìƒì„±í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.**

---

## 2. í›„ë³´ ë°©ì‹ ê²€í† 

ë‹¤ì–‘í•œ ë°©ì‹ì˜ ID ìƒì„± ì „ëµì„ ê²€í† í•˜ê³ , ê°ê°ì˜ **ì¥ë‹¨ì ê³¼ ì œì•½ ì¡°ê±´ì„ ë¹„êµ**í•˜ì—¬ ì„¤ê³„ ë°©í–¥ì— ëŒ€í•´ ë©´ì ‘ê´€ê³¼ **ê³µê°ëŒ€ë¥¼ í˜•ì„±**í•˜ëŠ” ê²ƒì´ ì´ ë‹¨ê³„ì˜ ëª©í‘œì…ë‹ˆë‹¤.

---

### 2.1 ë‹¤ì¤‘ ë§ˆìŠ¤í„° ë³µì œ

![image.png](https://github.com/user-attachments/assets/e288d936-949a-436b-bbfe-4f567c3b4c0d)

**ì„¤ëª…**

ì—¬ëŸ¬ DB ì„œë²„(MySQL ë“±)ê°€ ê°ì `AUTO_INCREMENT` ë°©ì‹ìœ¼ë¡œ IDë¥¼ ìƒì„±í•˜ë˜,

**ì„œë²„ë³„ë¡œ ì¦ê°€ ê°„ê²©ê³¼ ì‹œì‘ ê°’ì„ ë‹¤ë¥´ê²Œ ì„¤ì •**í•´ ID ì¶©ëŒì„ ë°©ì§€í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, `auto_increment_increment = ì„œë²„ ìˆ˜`, `auto_increment_offset = ì„œë²„ ë²ˆí˜¸`ì™€ ê°™ì´ êµ¬ì„±í•©ë‹ˆë‹¤.

ì´ ë°©ì‹ì„ í†µí•´ ê° ì„œë²„ëŠ” ê³ ìœ í•œ IDë¥¼ ë³‘ë ¬ë¡œ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

**ì¥ì **

- **ID ì¶©ëŒ ì—†ì´ ë³‘ë ¬ ìƒì„± ê°€ëŠ¥**
    
    ê° ì„œë²„ê°€ ê³ ìœ í•œ ì„¤ì •ìœ¼ë¡œ IDë¥¼ ìƒì„±í•˜ë¯€ë¡œ ì¡°ìœ¨ ì—†ì´ë„ ì¶©ëŒ ì—†ëŠ” ë³‘ë ¬ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
    
- **ìˆ˜í‰ í™•ì¥ ê°€ëŠ¥**
    
    ì„œë²„ ìˆ˜ë§Œí¼ ID ìƒì„±ì´ ë¶„ì‚°ë˜ì–´ ì „ì²´ ì²˜ë¦¬ëŸ‰ì„ ì¼ì • ìˆ˜ì¤€ê¹Œì§€ í™•ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    

---

**ë‹¨ì **

1. **ì‹œê°„ ìˆœ ì •ë ¬ ë¶ˆê°€**
    
    IDê°€ ìƒì„± ìˆœì„œì™€ ë¬´ê´€í•˜ê²Œ ì¦ê°€í•˜ë¯€ë¡œ, ì‹œê°„ ê¸°ë°˜ ì •ë ¬ì´ë‚˜ ë²”ìœ„ ì¿¼ë¦¬ì— ë¶€ì í•©í•©ë‹ˆë‹¤.
    
2. **ìš´ì˜ ë³µì¡ë„ ì¦ê°€**
    
    ì„œë²„ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ì œê±°í•  ê²½ìš°, ëª¨ë“  ë…¸ë“œì˜ ì„¤ì •ì„ ì¬ì¡°ì •í•´ì•¼ í•˜ë©° ê¸°ì¡´ IDì™€ì˜ ì¶©ëŒ ê°€ëŠ¥ì„±ë„ ì¡´ì¬í•©ë‹ˆë‹¤.
    
3. **ê¸€ë¡œë²Œ í™•ì¥ì— ì œì•½**
    
    ë‹¤ì¤‘ ë°ì´í„°ì„¼í„° í™˜ê²½ì—ì„œëŠ” ì„¤ì • ë™ê¸°í™”ê°€ ê¹Œë‹¤ë¡­ê³ , ë„¤íŠ¸ì›Œí¬ ì§€ì—°ì´ë‚˜ ì¥ì•  ì‹œ ì•ˆì •ì„± í™•ë³´ê°€ ì–´ë µìŠµë‹ˆë‹¤.
    

---

### 2.2 UUID

![image.png](https://github.com/user-attachments/assets/40b9585c-4219-495c-a5af-232952e2f6d9)

**ì„¤ëª…**

UUID(Universally Unique Identifier)ëŠ” **128ë¹„íŠ¸ í¬ê¸°ì˜ ê³ ìœ  ID**ë¥¼ ìƒì„±í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

ì„œë²„ ê°„ ì¡°ìœ¨ì´ë‚˜ ìƒíƒœ ê³µìœ  ì—†ì´ë„ **ì „ì—­ì ìœ¼ë¡œ ìœ ì¼í•œ IDë¥¼ ìì²´ ìƒì„±**í•  ìˆ˜ ìˆì–´,

ë¶„ì‚° í™˜ê²½ì—ì„œ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” ê°„ë‹¨í•œ ì ‘ê·¼ë²•ì…ë‹ˆë‹¤.

ì˜ˆì‹œ: `09c93e62-50b4-468d-bf8a-c07e1040bfb2`

---

**ì¥ì **

- **êµ¬í˜„ì´ ë‹¨ìˆœí•˜ê³  ë…ë¦½ì **
    
    ì„œë²„ ê°„ í†µì‹ ì´ë‚˜ ë™ê¸°í™” ì—†ì´, ê° ì„œë²„ê°€ ìì²´ì ìœ¼ë¡œ IDë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
- **ì¶©ëŒ ê°€ëŠ¥ì„± ë§¤ìš° ë‚®ìŒ**
    
    ì´ˆë‹¹ 10ì–µ ê°œë¥¼ 100ë…„ê°„ ìƒì„±í•´ë„ ì¤‘ë³µë  í™•ë¥ ì´ 50%ì— ë¶ˆê³¼í•  ì •ë„ë¡œ ì•ˆì „í•©ë‹ˆë‹¤.
    
- **ìˆ˜í‰ í™•ì¥ì— ìœ ë¦¬í•¨**
    
    ê° ì„œë²„ê°€ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•˜ë¯€ë¡œ, ë…¸ë“œ ìˆ˜ì™€ ê´€ê³„ì—†ì´ í™•ì¥ì´ ììœ ë¡­ìŠµë‹ˆë‹¤.
    

---

**ë‹¨ì **

1. **ID í¬ê¸°ê°€ í¼ (128ë¹„íŠ¸)**
    
    ì €ì¥ ê³µê°„ê³¼ ë„¤íŠ¸ì›Œí¬ ì „ì†¡ ë¹„ìš©ì´ ì¦ê°€í•˜ë©°, ì´ ì¥ì˜ ìš”êµ¬ì‚¬í•­ì¸ **64ë¹„íŠ¸ ë²”ìœ„ë¥¼ ì´ˆê³¼**í•©ë‹ˆë‹¤.
    
2. **ì •ë ¬ ë¶ˆê°€ëŠ¥**
    
    UUIDëŠ” ëœë¤í•˜ê²Œ ìƒì„±ë˜ë¯€ë¡œ, **ì‹œê°„ ê¸°ë°˜ ì •ë ¬ì´ë‚˜ ë²”ìœ„ ì¿¼ë¦¬**ì—ëŠ” ë¶€ì í•©í•©ë‹ˆë‹¤.
    
3. **ìˆ«ì ê¸°ë°˜ IDê°€ ì•„ë‹˜**
    
    UUIDëŠ” ì•ŒíŒŒë²³ì„ í¬í•¨í•˜ë¯€ë¡œ, ìˆ«ìë§Œìœ¼ë¡œ êµ¬ì„±ëœ IDë¥¼ ìš”êµ¬í•˜ëŠ” ì‹œìŠ¤í…œì—ì„œëŠ” ì œì•½ì´ ìˆìŠµë‹ˆë‹¤.
    

---

> **ğŸ’¬ ë‚´ ìƒê°**
UUIDì—ì„œë„ ë‹¤ì–‘í•œ ë²„ì „ì´ ìˆê³ , íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ë°˜ì´ë¼ ì‹œê°„ ì •ë ¬ ê°€ëŠ¥í•œ ê²ƒë„ ìˆì—ˆë‹¤.
ë˜, ì¶©ëŒ í™•ë¥  ë‚®ì¶”ê¸° ìœ„í•´ 128ë¹„íŠ¸ë¡œ ì„¤ê³„í•œ ê²ƒ ê°™ì€ë° ìƒí™©ì— ë”°ë¼ 64ë¹„íŠ¸ë„ ë‚˜ì˜ì§€ ì•Šì„ ê²ƒ ê°™ë‹¤.
ì˜ˆì „ì— í”„ë¡œì íŠ¸ì—ì„œ ì£¼ë¬¸ ë²ˆí˜¸ ìƒì„±í•  ë•Œ UUID ì“´ ì  ìˆì—ˆëŠ”ë°, ê·¸ë•ŒëŠ” ì£¼ë¬¸ì¼ì(YYYYMMDD)+UUID ì¼ë¶€ ì••ì¶•í•´ì„œ ë¶™ì—¬ ì¼ë˜ ê±¸ë¡œ ê¸°ì–µë‚œë‹¤. (ì´ë¯¸ ì¡´ì¬í•˜ë©´ ì¬ìƒì„±)
ì´ë²ˆ ì¥ì„ ì½ê³  ë‹¤ì‹œ êµ¬í˜„í•˜ë¼ê³  í•œë‹¤ë©´, Snowflake ë°©ì‹ì²˜ëŸ¼ êµ¬ì¡°í™”ëœ ID ì„¤ê³„ë„ ê³ ë ¤í•  ê²ƒ ê°™ë‹¤. ì •ë ¬ë„ ë˜ê³ , ì¸ë±ìŠ¤ ì„±ëŠ¥ë„ ì¢‹ì„ í…Œë‹ˆê¹Œ..
ë‹¤ë§Œ, MSA í™˜ê²½ì—ì„œëŠ” ì£¼ë¬¸ ì „ìš© ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë‘˜ì§€, ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ê°€ ë™ì‹œì— IDë¥¼ ìƒì„±í• ì§€ ë“± êµ¬ì¡°ë¥¼ ê³ ë ¤í•´ì•¼ í•  ë“¯ í•˜ë‹¤.
> 

---

### 2.3 í‹°ì¼“ ì„œë²„

![image.png](https://github.com/user-attachments/assets/2d383752-796e-406d-a5f0-77c6eca99818)

**ì„¤ëª…**

í•˜ë‚˜ì˜ ì¤‘ì•™ ì„œë²„(DB ë˜ëŠ” API)ë¥¼ **ID ë°œê¸‰ ì „ìš© í‹°ì¼“ ì„œë²„**ë¡œ ë‘ê³ ,

ê° ì„œë¹„ìŠ¤ ë…¸ë“œê°€ **í•„ìš”í•  ë•Œë§ˆë‹¤ ì´ ì„œë²„ì— IDë¥¼ ìš”ì²­**ë°›ì•„ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

ë³´í†µ ë‚´ë¶€ì ìœ¼ë¡œëŠ” DBì˜ `AUTO_INCREMENT` ê¸°ëŠ¥ì„ í™œìš©í•˜ë©°,

IDëŠ” **ìˆ«ì ê¸°ë°˜ì˜ ìˆœì°¨ì  ê°’**ìœ¼ë¡œ ì œê³µë©ë‹ˆë‹¤.

---

**ì¥ì **

- **ìˆ«ì ê¸°ë°˜ ID ì œê³µ**
    
    `AUTO_INCREMENT` ê¸°ë°˜ì´ë¼ ìˆ«ìë¡œ êµ¬ì„±ëœ IDë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ë°œê¸‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
- **ìœ ì¼ì„± ë³´ì¥**
    
    ì¤‘ì•™ ì„œë²„ê°€ ì¼ê´€ëœ ê·œì¹™ìœ¼ë¡œ IDë¥¼ ë°œê¸‰í•˜ë¯€ë¡œ ì¶©ëŒ ìš°ë ¤ê°€ ì—†ìŠµë‹ˆë‹¤.
    
- **êµ¬í˜„ì´ ë‹¨ìˆœí•˜ê³  ì§ê´€ì **
    
    ë³µì¡í•œ ë¶„ì‚° ì²˜ë¦¬ê°€ í•„ìš” ì—†ìœ¼ë©°, **ì¤‘ì†Œê·œëª¨ ì‹œìŠ¤í…œì— ë¹ ë¥´ê²Œ ì ìš©** ê°€ëŠ¥í•©ë‹ˆë‹¤.
    

---

**ë‹¨ì **

1. **ë‹¨ì¼ ì¥ì•  ì§€ì  (SPOF)**
    
    í‹°ì¼“ ì„œë²„ì— ì¥ì• ê°€ ë°œìƒí•˜ë©´ **ì „ì²´ ì‹œìŠ¤í…œì—ì„œ ID ìƒì„±ì´ ì¤‘ë‹¨**ë©ë‹ˆë‹¤.
    
    ì‹ ë¢°ì„±ê³¼ ê°€ìš©ì„± í™•ë³´ê°€ ì–´ë ¤ìš´ êµ¬ì¡°ì…ë‹ˆë‹¤.
    
2. **í™•ì¥ì„± ì œí•œ**
    
    íŠ¸ë˜í”½ì´ ëŠ˜ì–´ë‚ ìˆ˜ë¡ í‹°ì¼“ ì„œë²„ê°€ **ë³‘ëª© ì§€ì **ì´ ë©ë‹ˆë‹¤.
    
    ëŒ€ëŸ‰ ìš”ì²­ ì²˜ë¦¬ì—ëŠ” ë¶€ì í•©í•©ë‹ˆë‹¤.
    
3. **ìš´ì˜ ë³µì¡ì„± ì¦ê°€ (ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤ êµ¬ì„± ì‹œ)**
    
    í‹°ì¼“ ì„œë²„ë¥¼ ì—¬ëŸ¬ ëŒ€ë¡œ êµ¬ì„±í•˜ë ¤ë©´ **ë¶„ì‚° ë½ ë˜ëŠ” ë™ê¸°í™”**ê°€ í•„ìš”í•˜ë©°,
    
    ì´ë¡œ ì¸í•´ **êµ¬í˜„ ë‚œì´ë„ì™€ ë³µì¡ì„±ì´ ì¦ê°€**í•©ë‹ˆë‹¤.
    

---

> ğŸ’¬ ë‚´ ìƒê°
> 
> 
> Flickrì—ì„œëŠ” ì´ ë°©ì‹ìœ¼ë¡œ MySQLì˜ `AUTO_INCREMENT`ë¥¼ ì¤‘ì•™ í‹°ì¼“ ì„œë²„ë¡œ ê°ìŒŒê³ ,
> 
> **SPOF ë¬¸ì œë¥¼ ì™„í™”í•˜ê¸° ìœ„í•´ ì§ìˆ˜/í™€ìˆ˜ë¡œ ID ê³µê°„ì„ ë‚˜ëˆ  ë‘ ê°œì˜ ì„œë²„ë¥¼ ìš´ì˜**í–ˆë‹¤ê³  í•œë‹¤.
> 

---

### 2.4 íŠ¸ìœ„í„° Snowflake

**ì„¤ëª…**

Twitterì—ì„œ ê°œë°œí•œ SnowflakeëŠ” **64ë¹„íŠ¸ ìˆ«ìí˜• IDë¥¼ í•„ë“œ ë‹¨ìœ„ë¡œ ë¶„í• **í•´ êµ¬ì„±í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ,

**ì „ì—­ ìœ ì¼ì„±, ì‹œê°„ ì •ë ¬ì„±, ìˆ˜í‰ í™•ì¥ì„±**ì„ ëª¨ë‘ ë§Œì¡±ì‹œí‚¬ ìˆ˜ ìˆëŠ” ID ìƒì„± ì „ëµì…ë‹ˆë‹¤.

IDëŠ” ì‹œê°„, ë°ì´í„°ì„¼í„°, ì„œë²„, ì‹œí€€ìŠ¤ ë²ˆí˜¸ë¥¼ ì¡°í•©í•˜ì—¬ êµ¬ì„±ë˜ë©°, **ë¶„ì‚° í™˜ê²½ì—ì„œë„ ì¶©ëŒ ì—†ì´ ë…ë¦½ ìƒì„±**ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

---

**ID êµ¬ì¡° (ì´ 64ë¹„íŠ¸)**

![image.png](https://github.com/user-attachments/assets/5cad7de7-ee9d-4818-a3c9-ffbec28fa18a)

| í•„ë“œ | ë¹„íŠ¸ ìˆ˜ | ì„¤ëª… |
| --- | --- | --- |
| **Sign ë¹„íŠ¸** | 1 | í•­ìƒ 0ìœ¼ë¡œ ê³ ì • (ë¯¸ì‚¬ìš© í•„ë“œ) |
| **íƒ€ì„ìŠ¤íƒ¬í”„** | 41 | ê¸°ì¤€ ì‹œì (epoch) ì´í›„ì˜ ê²½ê³¼ ì‹œê°„ (ë°€ë¦¬ì´ˆ ë‹¨ìœ„) |
| **ë°ì´í„°ì„¼í„° ID** | 5 | ìµœëŒ€ 32ê°œ ë°ì´í„°ì„¼í„° êµ¬ë¶„ ê°€ëŠ¥ |
| **ì„œë²„ ID** | 5 | ë°ì´í„°ì„¼í„°ë‹¹ ìµœëŒ€ 32ëŒ€ ì„œë²„ ì‹ë³„ |
| **ì‹œí€€ìŠ¤ ë²ˆí˜¸** | 12 | ê°™ì€ ë°€ë¦¬ì´ˆ ë‚´ ìµœëŒ€ 4,096ê°œ ID ìƒì„± ê°€ëŠ¥ |

> ì „ì²´ì ìœ¼ë¡œ ì•½ 69ë…„ ë™ì•ˆ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©°, ë°€ë¦¬ì´ˆ ë‹¨ìœ„ë¡œ ì •ë ¬ ê°€ëŠ¥í•œ ìˆ«ì IDë¥¼ ì œê³µí•©ë‹ˆë‹¤.
> 

---

> ğŸ’¬ ë‚´ ìƒê°
íŠ¸ìœ„í„°ë¥¼ í¬í•¨í•´ ëŒ€ë¶€ë¶„ì˜ ì„œë¹„ìŠ¤ ìˆ˜ëª…ì€ 20~30ë…„ ì•ˆíŒì´ë¼ê³  í•œë‹¤.
ê·¸ëŸ¼ì—ë„ 69ë…„ì´ ì§€ë‚˜ë©´ ìƒìœ„ ë¹„íŠ¸ë¥¼ 1ë¡œ ë³€í™˜í•´ì„œ 69ë…„ ì¬ì—°ì¥í•˜ëŠ” ì‹ìœ¼ë¡œ í•œë‹¤ë©´ ë  ë“¯í•˜ë‹¤.
> 

---

**ì¥ì **

- **64ë¹„íŠ¸ ë‚´ì—ì„œ ìœ ì¼ì„±ê³¼ ì •ë ¬ì„± í™•ë³´**
    
    ì‹œê°„, ìœ„ì¹˜ ì •ë³´, ì‹œí€€ìŠ¤ë¥¼ ì¡°í•©í•´ **ì¤‘ë³µ ì—†ì´ ì •ë ¬ ê°€ëŠ¥í•œ ID ìƒì„±**ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
    
- **ì„œë²„ ê°„ í†µì‹  ì—†ì´ë„ ì¶©ëŒ ì—†ìŒ**
    
    ê° ì„œë²„ê°€ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•˜ë©°, ì‚¬ì „ ì„¤ì •ë§Œìœ¼ë¡œ ìœ ì¼ì„± ë³´ì¥ë©ë‹ˆë‹¤.
    
- **ìˆ˜í‰ í™•ì¥ì— ìœ ë¦¬í•¨**
    
    ë°ì´í„°ì„¼í„°ì™€ ì„œë²„ ID í•„ë“œë¥¼ í†µí•´ êµ¬ì¡°ì ìœ¼ë¡œ í™•ì¥ì´ ìš©ì´í•˜ë©°,
    
    **ìˆ˜ì²œë§Œ ê±´ ì´ìƒ**ì˜ ì´ˆë‹¹ ìƒì„±ëŸ‰ë„ ëŒ€ì‘ ê°€ëŠ¥í•©ë‹ˆë‹¤.
    
- **ìˆ«ì ê¸°ë°˜ ì •ë ¬ ID**
    
    ì €ì¥, ê²€ìƒ‰, ì¸ë±ì‹±ì— ìœ ë¦¬í•˜ë©°, ë²”ìœ„ ì¿¼ë¦¬ë„ íš¨ìœ¨ì ìœ¼ë¡œ ìˆ˜í–‰ë©ë‹ˆë‹¤.
    

---

**ë‹¨ì  / ì£¼ì˜í•  ì **

1. **ì‹œê³„ ì—­í–‰(Clock Skew) ì´ìŠˆ**
    
    ì„œë²„ ì‹œê°„ì´ ë’¤ë¡œ ê°€ëŠ” ê²½ìš° **ì¤‘ë³µ IDê°€ ìƒì„±ë  ìˆ˜ ìˆì–´ ìœ„í—˜**í•©ë‹ˆë‹¤.
    
    ì¼ë¶€ êµ¬í˜„ì—ì„œëŠ” ì‹œê³„ ì¬ë™ê¸°í™” ë˜ëŠ” ë°€ë¦¬ì´ˆ ë‹¨ìœ„ ëŒ€ê¸°(wait) ì „ëµìœ¼ë¡œ ëŒ€ì‘í•©ë‹ˆë‹¤.
    
2. **ê³ ì •ëœ êµ¬ì¡°ë¡œ ì¸í•œ ìœ ì—°ì„± ë¶€ì¡±**
    
    ê° í•„ë“œì˜ ë¹„íŠ¸ ìˆ˜ê°€ ê³ ì •ë˜ì–´ ìˆì–´, **ìš”êµ¬ì‚¬í•­ ë³€í™”ì— ë”°ë¼ êµ¬ì¡° ì¬ì„¤ê³„ê°€ í•„ìš”**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
    ì˜ˆ: ë°ì´í„°ì„¼í„°ê°€ 32ê°œë¥¼ ë„˜ëŠ” ê²½ìš°, í•„ë“œ ë¹„íŠ¸ ë¶„ë°°ë¥¼ ì¡°ì •í•´ì•¼ í•¨
    

---

## 3. ìµœì¢… ì„¤ê³„: Snowflake ê¸°ë°˜ ID ìƒì„±ê¸°

ì´ ë‹¨ê³„ì—ì„œëŠ” ì•ì„œ ì •ì˜í•œ í•„ë“œ êµ¬ì¡°ë¥¼ ë°”íƒ•ìœ¼ë¡œ, **IDë¥¼ ì–´ë–»ê²Œ ì‹¤ì œë¡œ ìš´ì˜í•˜ê³  ê´€ë¦¬í•  ê²ƒì¸ì§€**

ë¥¼ êµ¬ì²´í™”í•©ë‹ˆë‹¤. ê° í•„ë“œì˜ ì„¤ì • ì‹œì ê³¼ ë™ì‘ ë°©ì‹, ê·¸ë¦¬ê³  ìš´ì˜ìƒì˜ ì£¼ì˜ì‚¬í•­ì„ ì •ë¦¬í•©ë‹ˆë‹¤.

---

### 3.1 ë™ì‘ ì›ë¦¬

ê° í•„ë“œëŠ” ì„¤ì • ì‹œì ê³¼ ì—­í• ì— ë”°ë¼ ë‘ ê·¸ë£¹ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ê³ ì • ê°’ (ì„œë²„ ê¸°ë™ ì‹œ ì„¤ì •)

- **ë°ì´í„°ì„¼í„° ID / ì„œë²„ ID**
    
    ì‹œìŠ¤í…œ **ê¸°ë™ ì‹œ ì„¤ì •**ë˜ë©°, **ìš´ì˜ ì¤‘ì—ëŠ” ë³€ê²½í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**
    
    â†’ ë³€ê²½ ì‹œ ë™ì¼ ì„œë²„ì—ì„œ ìƒì„±ëœ IDê°€ ì¶©ëŒí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ **ë§¤ìš° ì‹ ì¤‘í•˜ê²Œ ê´€ë¦¬**í•´ì•¼ í•©ë‹ˆë‹¤.
    

### ë™ì  ê°’ (ID ìƒì„± ì‹œ ê³„ì‚°)

- **íƒ€ì„ìŠ¤íƒ¬í”„**
- **ì‹œí€€ìŠ¤ ë²ˆí˜¸**

---

### 3.2 ìš´ì˜ ì „ëµ

### íƒ€ì„ìŠ¤íƒ¬í”„

![image.png](https://github.com/user-attachments/assets/72e18c1d-2d22-489f-a4f8-20e7576adb0c)

Snowflake IDì—ì„œ **ê°€ì¥ í° ë¹„ì¤‘(41ë¹„íŠ¸)**ì„ ì°¨ì§€í•˜ëŠ” í•µì‹¬ í•„ë“œë¡œ,

**ê¸°ì¤€ ì‹œê°(epoch)** ì´í›„ ê²½ê³¼ëœ **ë°€ë¦¬ì´ˆ ë‹¨ìœ„ì˜ ì‹œê°„**ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

---

**ìš´ì˜ ì›ì¹™**

- **Epochì€ ì „ ì„œë²„ì—ì„œ ê³ ì •**
    
    â†’ ê¸°ì¤€ ì‹œê°ì€ UTC ê¸°ì¤€ìœ¼ë¡œ ì„¤ì •í•˜ë©°, ëª¨ë“  ì„œë²„ì—ì„œ **ë™ì¼í•˜ê²Œ ìœ ì§€**í•´ì•¼ í•©ë‹ˆë‹¤.
    
    â†’ ìš´ì˜ ì¤‘ ë³€ê²½í•˜ì§€ ì•Šìœ¼ë©°, ì´ë¥¼ í†µí•´ **ì •í•©ì„±ê³¼ ì¶©ëŒ ë°©ì§€**ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
    
- **ì‹œê°„ ìˆœ ì •ë ¬ ê°€ëŠ¥**
    
    â†’ ì‹œê°„ì´ íë¥¼ìˆ˜ë¡ íƒ€ì„ìŠ¤íƒ¬í”„ ê°’ì´ ì¦ê°€í•˜ë¯€ë¡œ, ìƒì„±ëœ IDë„ **ìì—°ìŠ¤ëŸ½ê²Œ ì •ë ¬**ë©ë‹ˆë‹¤.
    

---

**ë³€í™˜ ê°€ëŠ¥ì„±**

- IDì—ì„œ íƒ€ì„ìŠ¤íƒ¬í”„ ì¶”ì¶œ â†’ **UTC ì‹œê°„ìœ¼ë¡œ ë³€í™˜ ê°€ëŠ¥**
- UTC ì‹œê°„ â†’ **ë°€ë¦¬ì´ˆ ë‹¨ìœ„ íƒ€ì„ìŠ¤íƒ¬í”„ë¡œ ë³€í™˜ ê°€ëŠ¥**

â†’ ë””ë²„ê¹…, ë¡œê·¸ ì¶”ì , ì¥ì•  ë¶„ì„ ë“±ì—ì„œ **ì¶”ì ì„±ê³¼ ê°€ì‹œì„±**ì„ ë†’ì—¬ì¤ë‹ˆë‹¤.

---

**ìˆ˜ëª… ë° ë²”ìœ„**

- 41ë¹„íŠ¸ë¡œ í‘œí˜„ ê°€ëŠ¥í•œ ìµœëŒ€ ì‹œê°„: `2^41 - 1 â‰ˆ 2ì¡° 1990ì–µ ë°€ë¦¬ì´ˆ`
- ì•½ **69ë…„ê°„ ì‚¬ìš© ê°€ëŠ¥**
    
    (`= 2,199,023,255,551ms Ã· 1000 Ã· 60 Ã· 60 Ã· 24 Ã· 365 â‰ˆ 69ë…„`)
    

> ë”°ë¼ì„œ epochì€ í•œ ë²ˆë§Œ ì„¤ì •í•˜ë©´,
> 
> 
> ìš´ì˜ ì¤‘ ë³€ê²½ì´ë‚˜ ì¬ì¡°ì • ì—†ì´ë„ **ì•ˆì •ì ì¸ ì¥ê¸° ìš´ì˜ì´ ê°€ëŠ¥**í•©ë‹ˆë‹¤.
> 

---

### ì‹œí€€ìŠ¤ ë²ˆí˜¸

ì‹œí€€ìŠ¤ ë²ˆí˜¸ëŠ” ê°™ì€ ë°€ë¦¬ì´ˆ ì•ˆì— ìƒì„±ë˜ëŠ” IDë“¤ì˜ **ì¤‘ë³µì„ ë°©ì§€í•˜ëŠ” ì¹´ìš´í„° ì—­í• **ì„ í•©ë‹ˆë‹¤.

12ë¹„íŠ¸ë¡œ êµ¬ì„±ë˜ì–´ ìˆì–´, **í•œ ì„œë²„ë‹¹ ê°™ì€ ë°€ë¦¬ì´ˆ ë‚´ì— ìµœëŒ€ 4096ê°œ(2Â¹Â²)**ì˜ IDë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

**ìš´ì˜ ë°©ì‹**

- ê¸°ë³¸ì ìœ¼ë¡œ **0ë¶€í„° ì‹œì‘**í•˜ë©°, **ê°™ì€ ë°€ë¦¬ì´ˆ ë‚´ì— ì—¬ëŸ¬ ê°œì˜ IDê°€ ìš”ì²­ë  ë•Œ**ë§Œ ì¦ê°€í•©ë‹ˆë‹¤.
- **4096ê°œë¥¼ ì´ˆê³¼í•˜ëŠ” ìš”ì²­ì´ ë°œìƒí•˜ë©´**, ID ìƒì„±ê¸°ëŠ” **ë‹¤ìŒ ë°€ë¦¬ì´ˆê¹Œì§€ ëŒ€ê¸°(wait)**í•´ì•¼ í•©ë‹ˆë‹¤.

---

## 4. ìš´ì˜ ê³ ë ¤ì‚¬í•­ ë° í™•ì¥ ì „ëµ

### 4.1 ì‹œê³„ ë™ê¸°í™”

Snowflake ë°©ì‹ì€ **ëª¨ë“  ì„œë²„ê°€ ë™ì¼í•œ ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ ë™ì‘**í•œë‹¤ëŠ” ì „ì œ í•˜ì— ì„¤ê³„ë©ë‹ˆë‹¤. â†’ ì‹œê°„ ì •

í•˜ì§€ë§Œ ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” **ì„œë²„ ê°„ ì‹œê³„ ì˜¤ì°¨(Clock Skew)**ê°€ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë©°,

ì´ë¡œ ì¸í•´ **ID ì¶©ëŒ ë˜ëŠ” ì •ë ¬ ì˜¤ë¥˜**ê°€ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

**ëŒ€ì‘ ë°©ë²•**

- **NTP(Network Time Protocol)** ì‚¬ìš©
    
    ëŒ€ë¶€ë¶„ì˜ ì‹œìŠ¤í…œì€ NTPë¥¼ í†µí•´ ì„œë²„ ì‹œê³„ë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ë™ê¸°í™”í•©ë‹ˆë‹¤.
    
- **ì‹œê³„ ì—­í–‰(rollback) ê°ì§€ ë° ëŒ€ì‘**
    
    ì¼ë¶€ êµ¬í˜„ì²´ì—ì„œëŠ” íƒ€ì„ìŠ¤íƒ¬í”„ê°€ ê³¼ê±°ë¡œ ë˜ëŒì•„ê°€ëŠ” ê²½ìš°
    
    - **ID ìƒì„±ì„ ì ì‹œ ëŒ€ê¸°(wait)**í•˜ê±°ë‚˜,
    - **ì˜¤ë¥˜ë¥¼ ë°˜í™˜í•˜ê³  ì¬ì‹œë„**í•˜ê²Œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

---

### 4.2 í•„ë“œ ë¹„íŠ¸ ì¬ì„¤ê³„ ê°€ëŠ¥ì„±

**ì¬ì„¤ê³„ê°€ í•„ìš”í•œ ìƒí™©**

| ì‹œìŠ¤í…œ íŠ¹ì„± | ì¬ì„¤ê³„ ë°©í–¥ | ì´ìœ  |
| --- | --- | --- |
| **ë™ì‹œì„±ì´ ë‚®ê³ , ì¥ê¸° ìš´ì˜** | ì‹œí€€ìŠ¤ â†“ / íƒ€ì„ìŠ¤íƒ¬í”„ â†‘ | ì´ˆë‹¹ ID ìƒì„±ëŸ‰ì´ ì ìœ¼ë¯€ë¡œ ì‹œí€€ìŠ¤ ë¹„íŠ¸ë¥¼ ì¤„ì´ê³ , ë” ì˜¤ëœ ê¸°ê°„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ íƒ€ì„ìŠ¤íƒ¬í”„ ìˆ˜ëª… í™•ë³´ |
| **ë™ì‹œì„±ì´ ë§¤ìš° ë†’ê³ , ë‹¨ê¸° ì¤‘ì‹¬ ìš´ì˜** | ì‹œí€€ìŠ¤ â†‘ / íƒ€ì„ìŠ¤íƒ¬í”„ â†“ | íƒ€ì„ìŠ¤íƒ¬í”„ ìˆ˜ëª…ì´ ì§§ì•„ë„ ê´œì°®ê³ , ë°€ë¦¬ì´ˆë‹¹ ìƒì„±ëŸ‰ì´ ë§ì•„ ì‹œí€€ìŠ¤ ë¹„íŠ¸ë¥¼ ë„‰ë„‰íˆ í™•ë³´í•´ì•¼ í•¨ |

---

### 4.3 ê³ ê°€ìš©ì„±

ID ìƒì„±ê¸°ëŠ” ì¥ì•  ì‹œ **ì „ì²´ ì‹œìŠ¤í…œì— ì˜í–¥ì„ ì£¼ëŠ” í•µì‹¬ ì»´í¬ë„ŒíŠ¸**ì…ë‹ˆë‹¤.

ë”°ë¼ì„œ **ì¤‘ë‹¨ ì—†ëŠ” ìš´ì˜ì„ ìœ„í•œ ê³ ê°€ìš©ì„± ì„¤ê³„**ê°€ í•„ìˆ˜ì…ë‹ˆë‹¤.

---

**ìš´ì˜ ì „ëµ**

- **ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤ êµ¬ì„±**
    
    ë‹¨ì¼ ì¥ì•  ì§€ì ì„ í”¼í•˜ê¸° ìœ„í•´ **ì—¬ëŸ¬ ë…¸ë“œë¡œ êµ¬ì„±**,
    
    í•„ìš” ì‹œ **failover ë˜ëŠ” ë¡œë“œ ë°¸ëŸ°ì‹±** ì ìš©
    
- **ì„œë²„ ID ì¶©ëŒ ë°©ì§€**
    
    ê° ì¸ìŠ¤í„´ìŠ¤ì˜ **ì„œë²„ IDëŠ” ì¤‘ë³µ ì—†ì´ ê³ ì • ì„¤ì •**í•´ì•¼ í•˜ë©°,
    
    ì´ë¥¼ ìœ„í•œ **ë°°í¬ ìë™í™” ë˜ëŠ” êµ¬ì„± ê´€ë¦¬ ë„êµ¬** ì‚¬ìš© ê¶Œì¥
    
- **ì„¤ì •ì€ ê¸°ë™ ì‹œ ê³ ì •**
    
    `ì„œë²„ ID`, `ë°ì´í„°ì„¼í„° ID`ëŠ” **ê¸°ë™ ì´í›„ ë³€ê²½ ê¸ˆì§€**
    
    â†’ ë³€ê²½ ì‹œ **ID ì¶©ëŒ ìœ„í—˜**
    

---

> ğŸ“Œ Zookeeper, Etcd, í™˜ê²½ ë³€ìˆ˜ ë§¤í•‘ ë“±ì„ í†µí•´
> 
> 
> ì„œë²„ ID í• ë‹¹ì„ **ìë™í™”í•˜ê±°ë‚˜ ê³ ì •ì ìœ¼ë¡œ ê´€ë¦¬**í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤.
> 

---

## ğŸ“ ë¶€ë¡

### ì°¸ê³  ìë£Œ

- [UUID - Wikipedia](https://en.wikipedia.org/wiki/Universally_unique_identifier)
- [Flickr í‹°ì¼“ ì„œë²„ ì•„í‚¤í…ì²˜](https://code.flickr.net/2010/02/08/ticket-servers-distributed-unique-primary-keys-on-the-cheap/)
- [Twitter Snowflake ì†Œê°œ](https://blog.x.com/engineering/en_us/a/2010/announcing-snowflake)
- [Network Time Protocol (NTP)](https://en.wikipedia.org/wiki/Network_Time_Protocol)