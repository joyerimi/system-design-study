> 📌 **주의사항**
> 
> 
> 이 글은 『가상의 사례로 배우는 대규모 시스템 설계』를 참고하여, **운영 경험이 거의 없는 학습자**로서 내용을 정리한 문서입니다.
> 
> **학습 목적**으로 작성되었으니, 실전 환경과는 다를 수 있음을 감안해주시기 바랍니다.
> 
> 잘못된 부분은 언제든 피드백 부탁드립니다!
> 

## 시스템 설계에서 개략적인 규모 추정이 중요한 이유

개략적인 규모 추정은 시스템 설계 초기에 빠르게 방향을 잡는 데 꼭 필요하다.

트래픽, 저장소, 서버 수 같은 수치를 감으로라도 계산해봐야 **데이터 기반 의사결정**이 가능해진다.

---

### 1. 개략적인 규모 추정이란?

시스템이 얼마나 트래픽을 감당할 수 있을지, 얼마나 자원이 필요할지 대략적으로 계산해보는 것이다.

**QPS, 최대 QPS, 저장소 용량, 캐시 용량, 서버 수 같은 지표를 대략적으로 계산해보는 것이 개략적인 규모 추정이다.** 이를 통해 설계가 실제 요구사항을 감당할 수 있을지 판단할 수 있다.

이걸 잘 하려면, 최소한 아래 세 가지 감각은 갖추고 있어야 한다.

1. **2의 제곱수** 계산 감각 (KB, MB, GB 등)
2. **응답 지연(latency)** 수치에 대한 감각 (메모리 vs 디스크 vs 네트워크)
3. **가용성(availability)** 수치 이해 (99.9%면 연 몇 분 장애?)

---

### 2. 효과적인 추정을 위한 세 가지 기초

### 2.1 2의 제곱수

데이터 볼륨 단위는 **2의 제곱수** 기준으로 표현한다.

![Image](https://github.com/user-attachments/assets/fb4030c2-90b7-46ef-9490-73c418bc8c66)

### 2.2 응답 지연(Latency)

- **메모리 > SSD > 디스크 > 네트워크** 순으로 느려진다.
- 디스크 탐색은 피하고, 캐시나 메모리 기반 구조를 우선 고려한다.
- 네트워크 전송 시에는 압축 알고리즘을 사용해 전송 비용을 줄인다.
- 지리적으로 분산된 데이터센터 간 통신은 latency가 크므로 고려가 필요하다.

![통상적인 컴퓨터 연산 응답지연 값 (1)](https://github.com/user-attachments/assets/dbbfce96-7953-46f0-b592-f6e11a8a3233)

![통상적인 컴퓨터 연산 응답지연 값 (2)](https://github.com/user-attachments/assets/c0a90ae5-0717-49d0-9b9d-2ddc0fbf7269)

### 2.3 가용성 수치

가용성은 시스템이 얼마나 **오랜 시간 장애 없이 운영**될 수 있는지를 나타내며, 퍼센트(%)로 표현한다.

![Image](https://github.com/user-attachments/assets/a5af494a-802f-4980-9998-d5bea1e406a7)

---

### 3. 실제 추정 예시: 트위터 트래픽

**가정**

- 월간 사용자(MAU): 3억 명
- 일간 사용자(DAU): 약 1.5억 (MAU의 50%)
- 1인당 하루 2트윗
- 미디어 포함 트윗 비율: 10%
- 데이터 보관 기간: 5년

**QPS 추정**

- 전체 트윗 수: 1.5억 * 2 = 3억 트윗/일
- 초당 트윗 수: 3억 / 24시간 / 3600초 ≒ **3,500 QPS**
- 최대 피크 트래픽 고려: **약 7,000 QPS**

**저장소 요구량**

- 미디어 포함 트윗: 3억 * 10% = 3천만 건/일
- 하루 미디어 저장소: 3천만 * 1MB = **30TB**
- 5년 저장소: 30TB * 365일 * 5년 ≒ **55PB**

---

### 4. QPS와 TPS는 왜 중요한가?

시스템 설계에서 QPS 추정이 왜 중요한지 제대로 이해하려면, **QPS와 TPS가 실제로 뭘 의미하는지**, 그리고 **이 지표를 어떻게 활용하는지**를 먼저 알아야 한다.

### 4.1 QPS와 TPS 개념

- **QPS (Query Per Second)**
    
    초당 처리되는 쿼리 수. 시스템의 **처리량(Throughput)** 을 보여주는 지표로, 예를 들어 초당 100개의 검색 요청이 있다면 QPS는 100이다.
    
- **TPS (Transaction Per Second)**
    
    초당 처리되는 **성공적인 트랜잭션 수**. 일반적으로 DB에서 **ACID 원칙**을 만족하는 연산 단위 전체를 말하며, QPS보다 무겁고 복잡한 연산이다.
    

### 4.2 QPS, TPS는 어디서 측정하나?

- 애플리케이션, DB, 캐시 등 **레벨마다 다르게 측정 가능**하다.
- **실무에서는 보통 DB와 캐시 계층의 지표**를 가장 신뢰하고 활용한다.
    
    예: MySQL, Redis, Elasticsearch 등
    

### 4.3 MySQL에서 QPS 측정

```sql
SHOW GLOBAL STATUS LIKE 'Queries';
SHOW GLOBAL STATUS LIKE 'Uptime';
```

두 값을 일정 간격(예: 1초)으로 비교해 계산

```
QPS = (Queries2 - Queries1) / (Uptime2 - Uptime1)
```

### 4.4 실무에서의 활용 사례

- **쇼핑몰 이벤트 트래픽 폭증**
    - 평소보다 10배 늘어난 QPS (500 → 5000)
    - TPS도 절반 가까이 감소 (성공률 저하)
    - 해결: Redis로 인기상품 캐싱 + 로드밸런싱 → DB 부하 80% 감소, TPS 회복, 평균 응답 시간 30% 개선
- **금융 서비스의 월말 트래픽**
    - 특정 API에서 QPS 급증 및 TPS 실패율 3% 초과
    - Prometheus + Grafana로 모니터링 → 병목 식별
    - 해결: Auto Scaling + 트래픽 분산 → TPS 안정 유지, 장애 예방

---

### 5. 회고

취업 준비를 하면서 “성능 개선이 중요하다”는 말을 막연하게 들었지만,

『가상의 사례로 배우는 대규모 시스템 설계』 1~2장을 읽고 나서야 **왜 실무에서 이런 경험을 중요하게 보는지** 조금씩 감이 오기 시작했다.

실무에서는 실제 데이터를 기반으로 문제를 진단하고, 거기서 출발해 구조를 바꾸고 설계를 조정한다.

단순히 기술을 아는 걸 넘어, **문제를 수치로 파악하고 논리적으로 설명할 수 있는 역량**, 그리고 **데이터 기반으로 설계 결정을 내리는 힘**이 필요하다는 걸 느꼈다.

이번 학습을 통해 단순한 기술이 아니라 **시스템 전체에 대한 설계력**을 조금은 기를 수 있었고,

기능 단위가 아니라 큰 흐름을 보는 **그림 그리는 연습**을 할 수 있어 유익했다.

---

### 6. 레퍼런스

https://imksh.com/129