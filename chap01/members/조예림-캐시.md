## 1. íšŒê³ 

ì•„ë˜ ë‚´ìš©ë³´ë‹¤ íšŒê³ ê°€ ë” ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•´ì„œ ì œì¼ ìœ„ì— ë’€ë‹¤.

**í•¨ë¶€ë¡œ ìºì‹œ ì“°ì§€ ë§ì.**

ì‚¬ì‹¤ ì´ë²ˆ í”„ë¡œì íŠ¸ì—ì„œ ì„±ëŠ¥ ê°œì„ í•˜ë ¤ê³  ìºì‹œ ë„ì…ì„ ê³ ë¯¼í–ˆëŠ”ë°,

ê³µë¶€í•˜ë©´ì„œ ì˜¤íˆë ¤ **"ì•„ ì´ê±´ ì“°ì§€ ë§ì•„ì•¼ê² ë‹¤"**ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.

ë‹¨ê¸°ì ìœ¼ë¡œì•¼ "ìºì‹œ ì¨ì„œ ì„±ëŠ¥ ê°œì„ í•¨!"ì´ë¼ê³  í•  ìˆ˜ ìˆê² ì§€ë§Œ,

**ì •í•©ì„± ë¬¸ì œë‚˜ ì¥ì•  í¬ì¸íŠ¸**ë¥¼ ì–´ë–»ê²Œ ê´€ë¦¬í•  ê±´ì§€ê°€ ì§„ì§œ í•µì‹¬ì´ê³ ,

ê·¸ê²Œ... ì§„ì§œ ëì´ ì—†ë‹¤. ã…‹ã…‹ã…‹ã…‹ã…‹

ìºì‹œë¡œ ì„±ëŠ¥ì€ í™• ì˜¬ë¦´ ìˆ˜ ìˆì–´ë„,

ê·¸ë§Œí¼ ìš´ì˜ ë³µì¡ë„ë‘ ë¦¬ìŠ¤í¬ë„ ê°™ì´ ì˜¬ë¼ê°„ë‹¤ëŠ” ê±¸ í™•ì‹¤íˆ ëŠê¼ˆë‹¤.

**ê²°ë¡ :** ê°€ëŠ¥í•œ í•œ DB ë‚´ë¶€ì—ì„œ ë¨¼ì € ìŠ¹ë¶€ ë³´ì.

> ì¸ë±ìŠ¤ â†’ íŒŒí‹°ì…”ë‹ â†’ ë ˆí”Œë¦¬ì¼€ì´ì…˜ â†’ ìºì‹œ â†’ NoSQL â†’ ìƒ¤ë”© ìˆœ
> 

---

## 2. ì¥ì•  ëŒ€ì‘ ì „ëµ

### 2-1. Redis Sentinel

![image.png](attachment:ba624932-b18a-4d4a-a9c9-3ec7d52fcb63:image.png)

- **ê³ ê°€ìš©ì„± ì†”ë£¨ì…˜** (High Availability)
- ë§ˆìŠ¤í„°-ìŠ¬ë ˆì´ë¸Œ êµ¬ì¡° ê¸°ë°˜

### êµ¬ì„± ìš”ì†Œ

- **ë§ˆìŠ¤í„°**: ì“°ê¸° ì‘ì—… ë‹´ë‹¹
- **ìŠ¬ë ˆì´ë¸Œ**: ë§ˆìŠ¤í„° ë³µì œë³¸, ì½ê¸° ì „ìš©
- **ì„¼í‹°ë„¬**: ë…¸ë“œ ìƒíƒœ ëª¨ë‹ˆí„°ë§ ë° ìë™ ì¥ì•  ë³µêµ¬

### ë™ì‘ ë°©ì‹

- ì„¼í‹°ë„¬ì€ ì£¼ê¸°ì ìœ¼ë¡œ ë§ˆìŠ¤í„°/ìŠ¬ë ˆì´ë¸Œ ìƒíƒœ í™•ì¸
- ë§ˆìŠ¤í„° ì¥ì•  ë°œìƒ ì‹œ, ìŠ¬ë ˆì´ë¸Œ ì¤‘ í•˜ë‚˜ë¥¼ ìƒˆë¡œìš´ ë§ˆìŠ¤í„°ë¡œ ìë™ ìŠ¹ê²©
- í´ë¼ì´ì–¸íŠ¸ëŠ” ì„¼í‹°ë„¬ë¡œë¶€í„° í˜„ì¬ ë§ˆìŠ¤í„° ì •ë³´ë¥¼ ë°›ì•„ ì ‘ê·¼

### í•œê³„

- í•˜ë‚˜ì˜ ë§ˆìŠ¤í„°ë§Œ ì¡´ì¬ ê°€ëŠ¥ (ì“°ê¸° ë³‘ëª© ê°€ëŠ¥ì„±)

---

### 2-2. Redis Cluster

![image.png](attachment:99e87d69-1c4c-4dea-a703-38b1395e2d73:image.png)

- **ìˆ˜í‰ í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡°**
- ì—¬ëŸ¬ ë…¸ë“œì— ë°ì´í„° ë¶„ì‚° ì €ì¥

### êµ¬ì„± ìš”ì†Œ

- **í´ëŸ¬ìŠ¤í„° ë…¸ë“œ**: ì‹¤ì œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ì²˜ë¦¬
- **ìŠ¬ë¡¯**: í‚¤ í•´ì‹±ì„ í†µí•´ ë°ì´í„°ë¥¼ ê· ë“± ë¶„ì‚°

### ë™ì‘ ë°©ì‹

- í‚¤ í•´ì‹œê°’ì— ë”°ë¼ íŠ¹ì • ìŠ¬ë¡¯ìœ¼ë¡œ ë§¤í•‘
- ê° ë…¸ë“œëŠ” ìŠ¬ë¡¯ ë²”ìœ„ë¥¼ ë‚˜ëˆ  ë§¡ìŒ
- í´ë¼ì´ì–¸íŠ¸ëŠ” í•´ë‹¹ í‚¤ê°€ ì–´ë–¤ ë…¸ë“œì— ìˆëŠ”ì§€ íŒë‹¨í•˜ê³  ì§ì ‘ ì ‘ê·¼
- ì¼ë¶€ ë…¸ë“œê°€ ì£½ì–´ë„ ë‹¤ë¥¸ ë…¸ë“œê°€ ë°ì´í„° ìœ ì§€

### íŠ¹ì§•

- ë°ì´í„° ìƒ¤ë”©
- ìë™ ì¥ì•  ë³µêµ¬
- ì—¬ëŸ¬ ë…¸ë“œì—ì„œ ë™ì‹œì— ì½ê¸°/ì“°ê¸° ê°€ëŠ¥

### í•œê³„

- ì„¤ì • ë° ìš´ì˜ ë³µì¡
- ACID ì™„ì „ ë³´ì¥ ì–´ë ¤ì›€

---

### 2-3. ì¥ì•  ëŒ€ë¹„ Fallback ì˜ˆì‹œ

ğŸ“ [OliveYoung ì‚¬ë¡€: CircuitBreaker + Retry ì ìš©](https://oliveyoung.tech/2023-08-31/circuitbreaker-inventory-squad/)

> í•œì¤„ ìš”ì•½
> 
> 
> Redis ì¥ì•  ì‹œ, CircuitBreakerì™€ Retryë¡œ ì¥ì•  ì „íŒŒë¥¼ ë§‰ê³ , ìë™ìœ¼ë¡œ DBë¡œ ìš°íšŒí•˜ì—¬ ì•ˆì •ì„±ê³¼ ì‘ë‹µ ì†ë„ë¥¼ í™•ë³´í•¨.
> 

---

## 3. ìºì‹œ ì „ëµ

### 3-1. ìºì‹œ ì½ê¸° ì „ëµ

### 1) Look Aside (Cache Aside)

> ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ìºì‹œ â†’ ì—†ìœ¼ë©´ DB â†’ ê²°ê³¼ë¥¼ ìºì‹œì— ì €ì¥
> 

![image.png](attachment:033be406-5e94-45d5-88e5-ffef474b40a1:image.png)

- ë°˜ë³µ ì¡°íšŒ ë§ì€ ë°ì´í„°ì— ì í•©
- ìºì‹œ ì¥ì•  ì‹œ DB fallback ê°€ëŠ¥ (ì¥ì•  ëŒ€ì‘ â†‘)
- ë°ì´í„° ì •í•©ì„± ìœ ì§€ ì–´ë ¤ì›€
- Cache Warming í•„ìš” (ì´ˆê¸° Miss ë§ìœ¼ë©´ Thundering Herd ë°œìƒ ìœ„í—˜)

### 2) Read Through

> ìºì‹œ ë¯¸ìŠ¤ ì‹œ ìºì‹œ ì‹œìŠ¤í…œì´ DB ì¡°íšŒ í›„ ê²°ê³¼ë¥¼ ë°˜í™˜
> 

![image.png](attachment:5ba5e070-3475-4e8f-b8ec-a9bc095df39e:image.png)

- ë°ì´í„° ì €ì¥ ì£¼ì²´ê°€ **ìºì‹œ ì‹œìŠ¤í…œ**
- ìºì‹œ ì¥ì•  ì‹œ DB ì ‘ê·¼ ë¶ˆê°€ â†’ **ì „ì²´ ì„œë¹„ìŠ¤ ì¤‘ë‹¨ ìœ„í—˜**
- í•­ìƒ ë™ê¸°í™” ìƒíƒœ ìœ ì§€ â†’ **ë°ì´í„° ì •í•©ì„± ë³´ì¥**
- ê³ ê°€ìš©ì„± êµ¬ì„±ì„ ìœ„í•´ Redis Cluster/Sentinel í•„ìˆ˜

### ë¹„êµ ìš”ì•½

| í•­ëª© | Look Aside | Read Through |
| --- | --- | --- |
| DB ì ‘ê·¼ ì£¼ì²´ | ì• í”Œë¦¬ì¼€ì´ì…˜ | ìºì‹œ ì‹œìŠ¤í…œ |
| ì¥ì•  ëŒ€ì‘ | ìºì‹œ ì¥ì•  ì‹œ DBë¡œ ëŒ€ì²´ ê°€ëŠ¥ | ìºì‹œ ì¥ì•  ì‹œ ì „ì²´ ì¥ì•  ê°€ëŠ¥ |
| ìœ ì—°ì„± | ë†’ìŒ (ë¡œì§ ì§ì ‘ ì œì–´) | ë‚®ìŒ (êµ¬ì„± í•„ìš”) |
| ì •í•©ì„± | ë‚®ìŒ | ë†’ìŒ |
| ìœ„í—˜ ìš”ì†Œ | Thundering Herd | ì¥ì•  ì‹œ ì¹˜ëª…ì  |

---

### 3-2. ìºì‹œ ì“°ê¸° ì „ëµ

### 1) Write Back (Write Behind)

> ìºì‹œì— ë¨¼ì € ì €ì¥ â†’ ì¼ì • ì‹œê°„ í›„ ë°°ì¹˜ë¡œ DB ì €ì¥
> 

![image.png](attachment:c374ae3d-4465-4499-aea0-2a98aa2d4442:image.png)

- ì„±ëŠ¥ â†‘ (DB ì ‘ê·¼ ì¤„ì„)
- ìºì‹œ ì¥ì•  ì‹œ **ë°ì´í„° ìœ ì‹¤ ìœ„í—˜**
- ì“°ê¸° ë§ì€ ì‹œìŠ¤í…œì— ì í•©

### 2) Write Through

> ìºì‹œì— ì €ì¥ + ë™ì‹œì— DB ì €ì¥
> 

![image.png](attachment:15e35e02-27ae-4885-ad2d-0983e1763d9c:image.png)

- í•­ìƒ ìµœì‹  ìƒíƒœ ìœ ì§€
- ì“°ê¸° 2ë²ˆ ë°œìƒ â†’ **ì„±ëŠ¥ ì €í•˜ ê°€ëŠ¥**
- ì½ê¸° ìœ„ì£¼ ì‹œìŠ¤í…œì— ì í•©

### 3) Write Around

> DBì—ë§Œ ì €ì¥, ìºì‹œëŠ” ê±´ë“œë¦¬ì§€ ì•ŠìŒ
> 

![image.png](attachment:4e3043d5-3869-42a1-bbc3-bbb51eaa7dc2:image.png)

- ë¹ ë¦„ (ìºì‹œ ì €ì¥ X)
- ìºì‹œ miss ì‹œë§Œ ê°±ì‹  â†’ **ì •í•©ì„± ë¬¸ì œ ë°œìƒ ê°€ëŠ¥**
- ì“°ê¸° ë§ê³  ì½ê¸°ëŠ” ì ì€ ê²½ìš° ì í•©

### ë¹„êµ ìš”ì•½

| í•­ëª© | Write Back | Write Through | Write Around |
| --- | --- | --- | --- |
| ì €ì¥ ìœ„ì¹˜ | ìºì‹œ â†’ ë‚˜ì¤‘ì— DB | ìºì‹œ + DB ë™ì‹œ | DBë§Œ (ìºì‹œëŠ” ë¯¸ì‚¬ìš©) |
| ì •í•©ì„± | ë‚®ìŒ (ìœ ì‹¤ ê°€ëŠ¥) | ë†’ìŒ | ë‚®ìŒ |
| ì„±ëŠ¥ | ë†’ìŒ (ì“°ê¸° ìµœì í™”) | ë³´í†µ | ë†’ìŒ |
| ì“°ê¸° ë¹„ìš© | ë‚®ìŒ | ë†’ìŒ | ë‚®ìŒ |
| ì½ê¸° ì í•©ì„± | X | O | O |

---

## 4. ì°¸ê³  ë§í¬

https://architecturenotes.co/p/redis

https://helloworld.kurly.com/blog/redis-fight-part-1/

https://oliveyoung.tech/2023-08-31/circuitbreaker-inventory-squad/

https://inpa.tistory.com/entry/REDIS-%F0%9F%93%9A-%EC%BA%90%EC%8B%9CCache-%EC%84%A4%EA%B3%84-%EC%A0%84%EB%9E%B5-%EC%A7%80%EC%B9%A8-%EC%B4%9D%EC%A0%95%EB%A6%AC